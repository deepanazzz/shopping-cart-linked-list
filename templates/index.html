<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shopping Cart - Fresh Market</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="logo">
                <i class="fas fa-shopping-basket"></i>
                <h1>Fresh Market</h1>
            </div>
            <nav class="nav">
                <a href="#" class="nav-link" data-page="home">Home</a>
                <a href="#" class="nav-link active" data-page="cart">Cart</a>
                <a href="#" class="nav-link" data-page="orders">Order Tracking</a>
                <a href="#" class="nav-link" data-page="about">About</a>
            </nav>
            <div class="cart-icon">
                <i class="fas fa-shopping-cart"></i>
                <span class="cart-count" id="cartCount">0</span>
            </div>
        </div>
    </header>

    <!-- Home Page -->
    <section id="homePage" class="page-section" style="display: none;">
        <div class="home-hero">
            <div class="home-content">
                <div class="home-icon">
                    <i class="fas fa-shopping-cart"></i>
                </div>
                <h1 class="home-title">Shopping Cart Application</h1>
                <h2 class="home-subtitle">Using Singly Linked List</h2>
                <p class="home-description">
                    An efficient implementation of a shopping cart system<br>
                    utilizing data structures for optimal performance
                </p>
                <div class="home-features">
                    <div class="feature-card">
                        <i class="fas fa-link"></i>
                        <h3>Linked List</h3>
                        <p>Dynamic memory management</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-cart-plus"></i>
                        <h3>Add Items</h3>
                        <p>Seamlessly add products</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-edit"></i>
                        <h3>Update Cart</h3>
                        <p>Modify quantities instantly</p>
                    </div>
                    <div class="feature-card">
                        <i class="fas fa-trash-alt"></i>
                        <h3>Remove Items</h3>
                        <p>Delete unwanted products</p>
                    </div>
                </div>
                <button class="btn btn-home" onclick="navigateToCart()">
                    <i class="fas fa-arrow-right"></i> Go to Shopping Cart
                </button>
                <div class="home-tech">
                    <p>Built with</p>
                    <div class="tech-stack">
                        <span><i class="fab fa-python"></i> Python</span>
                        <span><i class="fas fa-server"></i> Flask</span>
                        <span><i class="fab fa-html5"></i> HTML5</span>
                        <span><i class="fab fa-css3-alt"></i> CSS3</span>
                        <span><i class="fab fa-js"></i> JavaScript</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Cart Page -->
    <section id="cartPage" class="page-section">
        <!-- Hero Section -->
        <div class="hero">
            <div class="container">
                <h2>Shopping Cart</h2>
                <p class="breadcrumb">
                    <a href="#" data-page="home">Home</a> / <span>Shopping Cart</span>
                </p>
            </div>
        </div>

        <!-- Main Content -->
        <main class="main-content">
            <div class="container">
                <!-- Add Item Section -->
                <div class="add-item-section">
                    <h3><i class="fas fa-plus-circle"></i> Add New Item</h3>
                    
                    <!-- Browse by Category Button -->
                    <div class="browse-category-container">
                        <button class="btn btn-category" id="browseCategoryBtn">
                            <i class="fas fa-th-large"></i> Browse by Category (BST View)
                        </button>
                    </div>

                    <div class="divider-text">
                        <span>OR</span>
                    </div>

                    <form id="addItemForm" class="add-item-form">
                        <div class="form-group">
                            <label for="productName">Product Name</label>
                            <input type="text" id="productName" placeholder="e.g., Fresh Oranges or search..." required>
                        </div>
                        <div class="form-group">
                            <label for="productPrice">Price (₹)</label>
                            <input type="number" id="productPrice" step="0.01" placeholder="0.00" required>
                        </div>
                        <div class="form-group">
                            <label for="productQuantity">Quantity</label>
                            <input type="number" id="productQuantity" min="1" value="1" required>
                        </div>
                        <button type="submit" class="btn btn-primary">
                            <i class="fas fa-cart-plus"></i> Add to Cart
                        </button>
                    </form>
                </div>

                <div class="cart-layout">
                    <!-- Cart Items Section -->
                    <div class="cart-section">
                        <div class="section-header">
                            <h3><i class="fas fa-shopping-bag"></i> Your Cart Items</h3>
                            <button class="btn btn-secondary btn-small" id="clearCart">
                                <i class="fas fa-trash"></i> Clear All
                            </button>
                        </div>

                        <div class="cart-items-container">
                            <!-- Cart Table Header -->
                            <div class="cart-table-header">
                                <div class="col-product">Product</div>
                                <div class="col-price">Price</div>
                                <div class="col-quantity">Quantity</div>
                                <div class="col-subtotal">Subtotal</div>
                                <div class="col-action">Action</div>
                            </div>

                            <!-- Cart Items -->
                            <div id="cartItems" class="cart-items">
                                <div class="empty-cart">
                                    <i class="fas fa-shopping-cart"></i>
                                    <p>Your cart is empty</p>
                                    <p class="empty-subtitle">Add items to get started!</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Order Summary Section -->
                    <div class="summary-section">
                        <h3><i class="fas fa-receipt"></i> Order Summary</h3>
                        <div class="summary-content">
                            <div class="summary-row">
                                <span class="label">Items:</span>
                                <span class="value" id="summaryItems">0</span>
                            </div>
                            <div class="summary-row">
                                <span class="label">Subtotal:</span>
                                <span class="value" id="summarySubtotal">₹0.00</span>
                            </div>
                            <div class="summary-row">
                                <span class="label">Shipping:</span>
                                <span class="value shipping" id="summaryShipping">₹0.00</span>
                            </div>
                            <div class="summary-row">
                                <span class="label">Tax (5%):</span>
                                <span class="value" id="summaryTax">₹0.00</span>
                            </div>
                            <div class="summary-row discount">
                                <span class="label">Discount (10%):</span>
                                <span class="value" id="summaryDiscount">-₹0.00</span>
                            </div>
                            <div class="summary-divider"></div>
                            <div class="summary-row total">
                                <span class="label">Total:</span>
                                <span class="value" id="summaryTotal">₹0.00</span>
                            </div>
                            <button class="btn btn-checkout" id="checkoutBtn">
                                <i class="fas fa-lock"></i> Proceed to Checkout
                            </button>
                            <div class="payment-methods">
                                <p>We accept:</p>
                                <div class="payment-icons">
                                    <i class="fab fa-cc-visa"></i>
                                    <i class="fab fa-cc-mastercard"></i>
                                    <i class="fab fa-cc-paypal"></i>
                                    <i class="fab fa-cc-amex"></i>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Visualization Button -->
                <div class="visualization-button-container">
                    <button class="btn btn-visualization" id="visualizeBtn">
                        <i class="fas fa-project-diagram"></i> Visualize Linked List
                    </button>
                </div>

                <!-- Recommendations Panel -->
                <div class="recommendations-panel" id="recommendationsPanel">
                    <h3><i class="fas fa-star"></i> Recommended for You</h3>
                    <div id="recommendationsList" class="recommendations-list">
                        <p class="no-recommendations">Add items to see recommendations!</p>
                    </div>
                    <button class="btn btn-graph" id="viewGraphBtn">
                        <i class="fas fa-network-wired"></i> View Product Network
                    </button>
                </div>
            </div>
        </main>
    </section>

    <!-- Order Tracking Page -->
    <section id="ordersPage" class="page-section" style="display: none;">
        <div class="hero">
            <div class="container">
                <h2>Order Tracking</h2>
                <p class="breadcrumb">
                    <a href="#" data-page="home">Home</a> / <span>Order Tracking</span>
                </p>
            </div>
        </div>

        <main class="main-content">
            <div class="container">
                <div id="noOrdersSection" class="empty-cart" style="margin-top: 2rem;">
                    <i class="fas fa-receipt"></i>
                    <p>No orders yet</p>
                    <p class="empty-subtitle">Place an order to see it in the queue.</p>
                </div>

                <div id="currentOrderSection" style="display: none;">
                    <div class="add-item-section" style="margin-bottom: 1.5rem;">
                        <h3><i class="fas fa-truck"></i> Current Order</h3>
                        <div id="currentOrderInfo"></div>
                        <div style="display: flex; gap: 12px; flex-wrap: wrap; margin-top: 1rem;">
                            <button class="btn btn-secondary btn-small" id="viewQueueBtn">
                                <i class="fas fa-list-ol"></i> View Detailed Queue
                            </button>
                            <button class="btn btn-secondary btn-small" onclick="showPage('cart')">
                                <i class="fas fa-shopping-cart"></i> Back to Cart
                            </button>
                        </div>
                    </div>

                    <div class="add-item-section">
                        <h3><i class="fas fa-stream"></i> Queue Visualization</h3>
                        <div id="queueContainer"></div>
                    </div>
                </div>

                <div class="add-item-section" style="margin-top: 1.5rem;">
                    <h3><i class="fas fa-history"></i> Order History</h3>
                    <div id="orderHistory"></div>
                </div>
            </div>
        </main>
    </section>

    <!-- Category Selection Modal -->
    <div id="categoryModal" class="modal">
        <div class="modal-content category-modal">
            <div class="modal-header">
                <h2><i class="fas fa-th-large"></i> Browse by Category</h2>
                <button class="close-modal" id="closeCategoryModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="categoryGrid" class="category-grid"></div>
            </div>
        </div>
    </div>

    <!-- BST Visualization Modal -->
    <div id="bstModal" class="modal">
        <div class="modal-content bst-modal">
            <div class="modal-header">
                <h2>
                    <i class="fas fa-sitemap"></i> Binary Search Tree View
                    <div class="modal-subtitle" id="bstCategoryName">Category</div>
                </h2>
                <button class="close-modal" id="closeBstModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="bst-info">
                    <p><strong>Click on any product node to add it to your cart!</strong></p>
                    <p class="modal-subtitle">Products are organized by price in a Binary Search Tree structure</p>
                </div>
                <div id="bstVisualization" class="bst-container"></div>
                <div class="bst-legend">
                    <div class="legend-item">
                        <div class="legend-indicator root"></div>
                        <span>Root Node</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-indicator left"></div>
                        <span>Left Child (Lower Price)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-indicator right"></div>
                        <span>Right Child (Higher Price)</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Graph Visualization Modal -->
    <div id="graphModal" class="modal">
        <div class="modal-content bst-modal">
            <div class="modal-header">
                <h2><i class="fas fa-network-wired"></i> Product Network</h2>
                <button class="close-modal" id="closeGraphModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="bst-info">
                    <p><strong>Tap a recommended node to add it to your cart.</strong></p>
                    <p class="modal-subtitle">This network uses a graph of “often bought together” relationships.</p>
                </div>
                <div id="graphVisualization" class="bst-container"></div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-credit-card"></i> Checkout</h2>
                <button class="close-modal" id="closeCheckoutModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div class="bst-info">
                    <p><strong>Review your items and enter delivery details.</strong></p>
                </div>

                <div id="checkoutSummary" style="margin-bottom: 1rem;"></div>
                <div class="summary-row total" style="margin-bottom: 1.5rem;">
                    <span class="label">Total:</span>
                    <span class="value" id="checkoutTotal">₹0.00</span>
                </div>

                <form id="checkoutForm" class="add-item-form">
                    <div class="form-group">
                        <label for="customerName">Name</label>
                        <input type="text" id="customerName" required>
                    </div>
                    <div class="form-group">
                        <label for="customerPhone">Phone</label>
                        <input type="tel" id="customerPhone" required>
                    </div>
                    <div class="form-group">
                        <label for="customerAddress">Address</label>
                        <input type="text" id="customerAddress" required>
                    </div>
                    <div class="form-group">
                        <label for="deliveryType">Delivery Type</label>
                        <select id="deliveryType" required>
                            <option value="Home Delivery">Home Delivery</option>
                            <option value="Store Pickup">Store Pickup</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-primary">
                        <i class="fas fa-check"></i> Place Order
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Queue Details Modal -->
    <div id="queueModal" class="modal">
        <div class="modal-content bst-modal">
            <div class="modal-header">
                <h2><i class="fas fa-list-ol"></i> Queue Details</h2>
                <button class="close-modal" id="closeQueueModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="queueStats"></div>
                <div id="queueDetailedView" class="bst-container"></div>
            </div>
        </div>
    </div>

    <!-- Linked List Visualization Modal -->
    <div id="visualizationModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2><i class="fas fa-link"></i> Shopping Cart - Linked List Visualization</h2>
                <button class="close-modal" id="closeModal">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="modal-body">
                <div id="linkedListVisualization" class="linked-list-container">
                    <div class="empty-visualization">
                        <i class="fas fa-link"></i>
                        <p>Your cart is empty</p>
                        <p class="empty-subtitle">Add items to see the linked list structure!</p>
                    </div>
                </div>
                <div class="visualization-legend">
                    <div class="legend-item">
                        <div class="legend-box head"></div>
                        <span>Head Pointer</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box node"></div>
                        <span>Node (Product)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box arrow"></div>
                        <span>Next Pointer</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-box null"></div>
                        <span>NULL</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- About Page -->
    <section id="aboutPage" class="page-section" style="display: none;">
        <div class="hero">
            <div class="container">
                <h2>About This Project</h2>
                <p class="breadcrumb">
                    <a href="#" data-page="home">Home</a> / <span>About</span>
                </p>
            </div>
        </div>

        <main class="main-content">
            <div class="container">
                <div class="about-content">
                    <div class="about-header">
                        <i class="fas fa-info-circle"></i>
                        <h2>Shopping Cart Using Singly Linked List</h2>
                    </div>

                    <div class="about-section">
                        <h3><i class="fas fa-users"></i> Project Developers</h3>
                        <p><strong>Deepana V. (1RV24IS031)</strong> and <strong>Deeksha Verma (1RV24IS030)</strong></p>
                    </div>

                    <div class="about-section">
                        <h3><i class="fas fa-bullseye"></i> Project Purpose</h3>
                        <p><strong>This project is a Shopping Cart application implemented using a Singly Linked List.</strong> The main purpose of this project is to demonstrate how data structures, particularly linked lists, can be used to manage dynamic data efficiently.</p>
                        <p>Users can add, remove, and update items in their cart, while the linked list structure ensures that the operations are performed efficiently without the limitations of static arrays.</p>
                    </div>

                    <div class="about-section">
                        <h3><i class="fas fa-code"></i> Backend Implementation</h3>
                        <p><strong>The backend of the project is built using Python and Flask.</strong> The linked list is implemented in a separate module, where each node represents a product in the shopping cart.</p>
                        <p>Core functionalities such as <strong>adding an item, removing an item, updating quantities, and calculating the total cost</strong> are handled through the linked list. Flask routes interact with the linked list to process user requests, and the backend prepares the data to be displayed on the frontend dynamically.</p>
                    </div>

                    <div class="about-section">
                        <h3><i class="fas fa-palette"></i> Frontend Design</h3>
                        <p><strong>The frontend is created using HTML, CSS, and minimal JavaScript.</strong> It features a user-friendly interface with two columns: the left column displays the details of the products added to the cart, including product name, price, quantity, and subtotal.</p>
                        <p>The right column provides an <strong>order summary</strong>, showing the total items and total cost. The quantity column includes <strong>+ and - buttons</strong> for adjusting quantities, and the interface dynamically updates the cart to reflect any changes.</p>
                        <p><strong>Overall, the frontend ensures a visually appealing and interactive experience for the user.</strong></p>
                    </div>

                    <div class="about-tech-stack">
                        <h3><i class="fas fa-laptop-code"></i> Technologies Used</h3>
                        <div class="tech-grid">
                            <div class="tech-item">
                                <i class="fab fa-python"></i>
                                <span>Python</span>
                            </div>
                            <div class="tech-item">
                                <i class="fas fa-server"></i>
                                <span>Flask</span>
                            </div>
                            <div class="tech-item">
                                <i class="fab fa-html5"></i>
                                <span>HTML5</span>
                            </div>
                            <div class="tech-item">
                                <i class="fab fa-css3-alt"></i>
                                <span>CSS3</span>
                            </div>
                            <div class="tech-item">
                                <i class="fab fa-js"></i>
                                <span>JavaScript</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2024 Fresh Market. Shopping Cart using Singly Linked List</p>
            <div class="social-links">
                <a href="#"><i class="fab fa-github"></i></a>
                <a href="#"><i class="fab fa-linkedin"></i></a>
                <a href="#"><i class="fas fa-envelope"></i></a>
            </div>
        </div>
    </footer>

    <!-- Toast Notification -->
    <div id="toast" class="toast">
        <div class="toast-content">
            <i class="fas fa-check-circle"></i>
            <span id="toastMessage">Item added to cart!</span>
        </div>
    </div>
    <script src="{{ url_for('static', filename='database.js') }}"></script>
    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>